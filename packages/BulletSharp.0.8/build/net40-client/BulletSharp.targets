<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">

  <ItemGroup Condition="'$(Platform)' == 'anycpu'">
    <InputBinaries Include="libbulletc-windows-x86.dll" />
    <OutputBinaries Include="libbulletc.dll" />
  </ItemGroup>
  <ItemGroup Condition="'$(Platform)' == 'x86'">
    <InputBinaries Include="libbulletc-windows-x86.dll" />
    <OutputBinaries Include="libbulletc.dll" />
  </ItemGroup>
  <ItemGroup Condition="'$(Platform)' == 'x64'">
    <InputBinaries Include="libbulletc-windows-x64.dll" />
    <OutputBinaries Include="libbulletc.dll" />
  </ItemGroup>

  <ItemGroup>
    <BinariesSource Include="@(InputBinaries->'$(MSBuildThisFileDirectory)%(Identity)')" />
    <BinariesTarget Include="@(OutputBinaries->'$(OutputPath)%(Identity)')" />
  </ItemGroup>

  <Target Name="CopyNativeBinaries"
      AfterTargets="CoreCompile"
      Inputs="@(BinariesSource)"
      Outputs="@(BinariesTarget)">
    <Copy SourceFiles="@(BinariesSource)" DestinationFiles="@(BinariesTarget)" SkipUnchangedFiles="true" />
  </Target>
</Project>