<!DOCTYPE html>
<html>
    <head>
        <link href="css/fusion360.css" rel="stylesheet" type="text/css">
        <script src="js/fusionInterface.js"></script>
        <script src="js/utility.js"></script>
        <style>
            .fusion-content input[type=checkbox], .fusion-content input[type=text], .fusion-content input[type=number], .fusion-content select {
                position: relative;
                left: 0px;
            }

            .fusion-content fieldset
            {
                margin: 6px 0 12px 0;
                padding: 6px 12px 0 12px;
            }

            .fusion-content input:focus, .fusion-content select:focus, .fusion-content button:focus
            {
                outline: none;
            }
            .fusion-content input, .fusion-content select {
                padding: 0;
            }

            .fusion-content {
                overflow: auto;
            }
            
            .fusion-content button {
                margin-bottom: 1rem;
                width: 100%;
            }
        </style>
    </head>
    <body>
        <script src="js/sensors.js"></script>
        
        <div class="fusion-content">
            <fieldset id="port-fieldset">
                <legend class="port-fieldset-legend">Driver Port</legend>
                <select id="signal" class="field-label">
                    <option value="2">CAN</option>
                    <option value="1">PWM</option>
                </select>
                <span class="field-select" style="padding-right: 2px">
                    <input id="port" type="number" min="3" max="999" step="1">
                </span>
            </fieldset>
            <fieldset id="gear-fieldset">
                <legend class="gear-fieldset-legend">Gear Ratio</legend>
                <span class="field-select" style="padding-right: 2px">
                    <input id="gear" type="number" min="0.001" max="999">
                </span>
            </fieldset>
            <fieldset id="sensor-fieldset">
                <legend class="sensor-fieldset-legend">Sensor Setup</legend>
                <div id="sensor-settings">
                    <fieldset id="sensor-config-template" class="sensor-config">
                        <span class="field-label">Sensor</span>
                        <span class="field-select"><select class="sensor-type" onchange="updateFieldOptions(this.parentNode.parentNode)">
                            <option value="1">Encoder</option>
                        </select></span>
        
                        <select class="field-label port-signal">
                            <option value="1">DIO</option>
                            <!--<option value="2">Analog</option>-->
                        </select>
                        <span class="field-select"><select class="port-number-a">
                            <option value="0">0</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                            <option value="6">6</option>
                            <option value="7">7</option>
                            <option value="8">8</option>
                        </select>
                        <select class="port-number-b">
                            <option value="0">0</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                            <option value="6">6</option>
                            <option value="7">7</option>
                            <option value="8">8</option>
                        </select></span>
                        
                        <span class="field-label"><span class="conversion-factor-label">Conversion Factor</span></span>
                        <span class="field-input"><input class="conversion-factor" type="number" value="1.0"></span>
        
                        <button class="delete-sensor-button" type="button" onclick="deleteSensor(this.parentNode)">Delete</button>
                    </fieldset>
                </div>
                
                <button id='new-sensor-button' type='button' onclick='newSensor()'>New Sensor</button>
            </fieldset>
        </div>

        <div class="fusion-footer">
            <button id='save-button' type='button' onclick='sendInfoToFusion()' style="position: sticky; bottom: 0px;">Save</button>
        </div>

        <script>
            var sensorTemplate = document.getElementById('sensor-config-template').cloneNode(true);
        </script>
    </body>
</html>
